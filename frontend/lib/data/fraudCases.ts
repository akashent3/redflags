/**
 * Historical Fraud Cases Database
 * Real Indian corporate fraud cases with timeline and red flags
 */

import { FraudCase, FraudPattern } from '@/lib/types/fraud';

export const FRAUD_CASES: FraudCase[] = [
  {
    case_id: 'satyam-2009',
    company_name: 'Satyam Computer Services',
    year: 2009,
    sector: 'Technology',
    industry: 'IT Services',
    stock_decline_percent: -97.4,
    market_cap_lost_cr: 14000,
    primary_flags: ['Inflated Cash Balances', 'Fake Revenue', 'Related Party Transactions'],
    fraud_type: 'Accounting Fraud',
    timeline: [
      { date: '2003-2008', event: '₹7,136 Cr fake revenue reported over 5 years', type: 'red_flag' },
      { date: 'Oct 2008', event: 'Failed acquisition attempt of Maytas (promoter companies)', type: 'red_flag' },
      { date: 'Dec 2008', event: 'Board rejects Maytas acquisition after investor backlash', type: 'investigation' },
      { date: 'Jan 7, 2009', event: 'Chairman Ramalinga Raju confesses to fraud in letter', type: 'collapse' },
      { date: 'Jan 9, 2009', event: 'Stock crashes from ₹179 to ₹11.50 (94% fall in 2 days)', type: 'collapse' },
      { date: '2014', event: 'Raju and associates convicted, sentenced to 7 years', type: 'outcome' },
    ],
    red_flags_detected: [
      {
        flag_number: 1,
        flag_name: 'Profit growing but CFO flat/declining',
        evidence: 'Net profit grew from ₹1,230 Cr to ₹2,839 Cr (2003-08) but CFO remained stagnant',
        when_visible: '3-5 years before',
      },
      {
        flag_number: 14,
        flag_name: 'Abnormal cash balances',
        evidence: '₹5,040 Cr cash on books was entirely fabricated',
        when_visible: '5+ years before',
      },
      {
        flag_number: 38,
        flag_name: 'Related party transactions with promoter entities',
        evidence: 'Attempted acquisition of Maytas (promoter-owned) at inflated valuations',
        when_visible: '3 months before',
      },
    ],
    what_investors_missed: [
      'Cash of ₹5,040 Cr not earning interest - why?',
      'Huge receivables growth but no matching cash collection',
      'Failed Maytas acquisition raised concerns about related party dealings',
      'No dividend despite massive cash pile (red flag)',
      'Auditor (PwC) failed to verify bank balances properly',
    ],
    outcome: 'Complete collapse. Investors lost ₹14,000 Cr. Company acquired by Tech Mahindra for ₹58/share (90% below peak). Biggest accounting fraud in Indian corporate history.',
    regulatory_action: 'SEBI banned Raju for 14 years. CBI prosecution. PwC fined and banned from auditing for 2 years. New corporate governance norms introduced.',
    lessons_learned: [
      'Always verify cash with bank statements (not just balance sheet)',
      'High cash with low/no dividend is suspicious',
      'Related party transactions need extreme scrutiny',
      'Trust but verify - even reputable auditors can miss fraud',
    ],
    detection_difficulty: 'Medium',
  },
  {
    case_id: 'yes-bank-2020',
    company_name: 'Yes Bank',
    year: 2020,
    sector: 'Banking',
    industry: 'Private Bank',
    stock_decline_percent: -98.8,
    market_cap_lost_cr: 90000,
    primary_flags: ['NPA Underreporting', 'High Promoter Pledging', 'Divergence with RBI'],
    fraud_type: 'Accounting Fraud',
    timeline: [
      { date: '2017', event: 'RBI finds ₹4,176 Cr divergence in NPA reporting', type: 'red_flag' },
      { date: 'Jan 2018', event: 'Rana Kapoor steps down as CEO after RBI pressure', type: 'investigation' },
      { date: 'Sep 2018', event: 'RBI finds ₹6,355 Cr divergence again (40% underreporting)', type: 'red_flag' },
      { date: 'Mar 2019', event: 'Moody\'s downgrades Yes Bank citing asset quality', type: 'investigation' },
      { date: 'Mar 5, 2020', event: 'RBI imposes moratorium, withdrawal capped at ₹50,000', type: 'collapse' },
      { date: 'Mar 2020', event: 'Stock falls from ₹404 to ₹5 in 18 months', type: 'collapse' },
      { date: '2021', event: 'Rana Kapoor arrested for money laundering, quid pro quo loans', type: 'outcome' },
    ],
    red_flags_detected: [
      {
        flag_number: 19,
        flag_name: 'High NPA levels or divergence with RBI',
        evidence: '₹6,355 Cr divergence in NPA reporting vs RBI assessment (40% understatement)',
        when_visible: '2 years before',
      },
      {
        flag_number: 25,
        flag_name: 'High promoter pledging',
        evidence: 'Rana Kapoor pledged 96% of holdings by 2018',
        when_visible: '2 years before',
      },
      {
        flag_number: 12,
        flag_name: 'Aggressive lending growth',
        evidence: 'Loan book grew 30% YoY while peers grew 10-15%',
        when_visible: '3-4 years before',
      },
    ],
    what_investors_missed: [
      'RBI\'s repeated divergence findings (2017, 2018) were public',
      'Promoter pledged 96% of shares - desperate for cash',
      'Stock fell 75% before moratorium but retail kept buying the dip',
      'Credit rating downgrades by Moody\'s, ICRA in 2019',
      'Aggressive loan growth to stressed sectors (real estate, NBFCs)',
    ],
    outcome: 'Bank collapsed. ₹90,000 Cr market cap wiped out. Depositors faced withdrawal limits. SBI-led consortium rescued bank with ₹10,000 Cr infusion. Stock fell from ₹404 to ₹5.',
    regulatory_action: 'RBI took control. Rana Kapoor arrested and convicted. SEBI investigation into accounting fraud. New CEO appointed. Governance overhaul mandated.',
    lessons_learned: [
      'RBI divergence reports are critical red flags',
      'High promoter pledging = promoter has no confidence',
      'Banking frauds are hardest to detect until too late',
      'Credit rating downgrades should trigger exit',
    ],
    detection_difficulty: 'Hard',
  },
  {
    case_id: 'pc-jeweller-2018',
    company_name: 'PC Jeweller',
    year: 2018,
    sector: 'Retail',
    industry: 'Jewelry',
    stock_decline_percent: -99.1,
    market_cap_lost_cr: 10000,
    primary_flags: ['Fake Sales', 'Loan Fraud', 'Auditor Resignation'],
    fraud_type: 'Accounting Fraud',
    timeline: [
      { date: '2013-2017', event: 'Stock rises 50x from ₹50 to ₹2,500 in 4 years', type: 'red_flag' },
      { date: 'Jan 2018', event: 'PwC resigns as auditor citing inventory discrepancies', type: 'red_flag' },
      { date: 'Feb 2018', event: 'Company announces ₹1,400 Cr accounting error (suddenly!)', type: 'investigation' },
      { date: 'Mar 2018', event: 'Stock crashes 90% in days after error announcement', type: 'collapse' },
      { date: 'May 2018', event: 'Banks report ₹5,200 Cr loan fraud, CBI files case', type: 'investigation' },
      { date: '2020', event: 'Promoters arrested for fraud. Stock at ₹20 (99% down)', type: 'outcome' },
    ],
    red_flags_detected: [
      {
        flag_number: 2,
        flag_name: 'Auditor resigned or changed recently',
        evidence: 'PwC resigned as auditor in Jan 2018 citing serious concerns',
        when_visible: '2 months before',
      },
      {
        flag_number: 6,
        flag_name: 'Revenue growing much faster than peers',
        evidence: 'Revenue grew 200% while Titan grew 15% (same period)',
        when_visible: '2-3 years before',
      },
      {
        flag_number: 14,
        flag_name: 'Abnormal inventory buildup',
        evidence: 'Inventory of ₹6,000 Cr for ₹8,000 Cr revenue (75% of sales)',
        when_visible: '1-2 years before',
      },
    ],
    what_investors_missed: [
      'PwC (Big 4 auditor) resignation was huge red flag',
      'Inventory to sales ratio was 75% vs 30% for Titan',
      'Stock rose 50x in 4 years - unsustainable growth',
      'Suddenly discovered ₹1,400 Cr accounting error',
      'No one questions why inventory is so high for a jewelry retailer',
    ],
    outcome: 'Company collapsed. Stock fell from ₹2,500 to ₹20 (99% loss). ₹5,200 Cr loan fraud detected. Promoters arrested. Investors lost ₹10,000 Cr.',
    regulatory_action: 'CBI filed case for ₹5,200 Cr loan fraud. SEBI banned promoters. ED attached assets. Company delisted from exchanges.',
    lessons_learned: [
      'Auditor resignation = sell immediately, ask questions never',
      'Inventory to sales ratio is critical for retail companies',
      'Hypergrowth stocks often hide fraud',
      'Compare with peers - if 10x faster growth, be skeptical',
    ],
    detection_difficulty: 'Easy',
  },
  {
    case_id: 'gitanjali-2018',
    company_name: 'Gitanjali Gems',
    year: 2018,
    sector: 'Manufacturing',
    industry: 'Jewelry',
    stock_decline_percent: -99.7,
    market_cap_lost_cr: 8000,
    primary_flags: ['Related Party Loans', 'Nirav Modi Connection', 'PNB Fraud'],
    fraud_type: 'Promoter Misconduct',
    timeline: [
      { date: '2011-2017', event: 'Mehul Choksi siphons ₹7,000 Cr via fake LoUs from PNB', type: 'red_flag' },
      { date: 'Jan 2018', event: 'PNB detects ₹11,400 Cr fraud by Nirav Modi and Mehul Choksi', type: 'investigation' },
      { date: 'Feb 2018', event: 'Gitanjali stock crashes 99% as Choksi flees India', type: 'collapse' },
      { date: 'Mar 2018', event: 'ED attaches ₹5,100 Cr assets. CBI raids premises', type: 'investigation' },
      { date: '2018-present', event: 'Choksi flees to Antigua. Extradition pending.', type: 'outcome' },
    ],
    red_flags_detected: [
      {
        flag_number: 38,
        flag_name: 'High related party transactions',
        evidence: 'Massive loans to related diamond trading entities controlled by Choksi',
        when_visible: '5+ years before (if investigated)',
      },
      {
        flag_number: 12,
        flag_name: 'Debt levels rising rapidly',
        evidence: 'Debt grew from ₹2,000 Cr to ₹7,000 Cr in 5 years (250% increase)',
        when_visible: '3-5 years before',
      },
      {
        flag_number: 25,
        flag_name: 'Promoter pledging increasing',
        evidence: '85% of promoter shares pledged by 2017',
        when_visible: '1 year before',
      },
    ],
    what_investors_missed: [
      'Huge debt increase without matching revenue growth',
      'Promoter pledged 85% shares - clear desperation',
      'Related party transactions with opaque diamond entities',
      'Connection to Nirav Modi (co-conspirator) was public',
      'Banking sector red flags (PNB fraud) spilled over',
    ],
    outcome: 'Complete collapse. Stock from ₹100 to ₹0.30 (99.7% loss). ₹7,000 Cr siphoned. Promoter fled country. Company in liquidation. Investors lost ₹8,000 Cr.',
    regulatory_action: 'CBI case filed. ED attached ₹5,100 Cr assets. Choksi declared fugitive. Red corner notice issued. Assets auctioned.',
    lessons_learned: [
      'High promoter pledging + rising debt = sell signal',
      'Related party transactions in opaque sectors (diamonds) are risky',
      'When promoter flees country, recovery is near impossible',
      'Banking frauds often involve jewelry/diamond companies',
    ],
    detection_difficulty: 'Medium',
  },
  {
    case_id: 'ilfs-2018',
    company_name: 'IL&FS (Infrastructure Leasing & Financial Services)',
    year: 2018,
    sector: 'Financial Services',
    industry: 'NBFC',
    stock_decline_percent: -95.0,
    market_cap_lost_cr: 65000,
    primary_flags: ['Asset-Liability Mismatch', 'Rating Downgrades', 'Debt Default'],
    fraud_type: 'Governance Issues',
    timeline: [
      { date: '2008-2018', event: 'IL&FS borrows ₹91,000 Cr for long-term infra projects', type: 'red_flag' },
      { date: 'Aug 2018', event: 'IL&FS defaults on short-term debt obligations', type: 'investigation' },
      { date: 'Sep 2018', event: 'Rating agencies downgrade IL&FS to default grade', type: 'collapse' },
      { date: 'Oct 2018', event: 'Government takes control. Stock market crashes 10%', type: 'collapse' },
      { date: '2019-present', event: 'Debt resolution ongoing. ₹61,000 Cr debt resolved so far', type: 'outcome' },
    ],
    red_flags_detected: [
      {
        flag_number: 12,
        flag_name: 'Debt levels rising rapidly',
        evidence: 'Total debt of ₹91,000 Cr vs equity of ₹6,000 Cr (15:1 leverage)',
        when_visible: '5+ years before',
      },
      {
        flag_number: 21,
        flag_name: 'Asset-liability mismatch',
        evidence: 'Borrowed short-term money for long-term infrastructure projects',
        when_visible: '3-5 years before',
      },
      {
        flag_number: 34,
        flag_name: 'Governance failures',
        evidence: 'Board included government nominees but failed to oversee risk',
        when_visible: '2-3 years before',
      },
    ],
    what_investors_missed: [
      'NBFC with 15:1 leverage in risky infrastructure sector',
      'Short-term borrowings for long-term projects (ALM mismatch)',
      'Rating downgrades happened AFTER default (useless)',
      'Government nominees on board gave false sense of security',
      'Contagion risk - IL&FS collapse triggered NBFC crisis',
    ],
    outcome: 'Near-total collapse. ₹91,000 Cr debt default. Stock fell 95%. NBFC sector crashed. Mutual funds faced redemptions. Government bailout prevented systemic crisis.',
    regulatory_action: 'Government superseded board. Appointed Uday Kotak to lead resolution. SEBI investigation. NFRA audit quality probe. New NBFC regulations.',
    lessons_learned: [
      'Asset-liability mismatch is deadly for NBFCs',
      'High leverage in infrastructure = extreme risk',
      'Government presence doesn\'t guarantee safety',
      'Rating agencies lag reality - don\'t rely on them',
    ],
    detection_difficulty: 'Hard',
  },
  {
    case_id: 'dhfl-2019',
    company_name: 'DHFL (Dewan Housing Finance)',
    year: 2019,
    sector: 'Financial Services',
    industry: 'Housing Finance',
    stock_decline_percent: -99.5,
    market_cap_lost_cr: 12000,
    primary_flags: ['NPA Spike', 'Loan Fraud', 'Promoter Diversion'],
    fraud_type: 'Promoter Misconduct',
    timeline: [
      { date: 'Jan 2019', event: 'Cobrapost investigation alleges ₹31,000 Cr siphoned by promoters', type: 'red_flag' },
      { date: 'May 2019', event: 'DHFL defaults on debt repayments', type: 'investigation' },
      { date: 'Jun 2019', event: 'Stock crashes from ₹600 to ₹20 (97% fall)', type: 'collapse' },
      { date: 'Nov 2019', event: 'RBI refers DHFL to NCLT for bankruptcy', type: 'investigation' },
      { date: '2021', event: 'Piramal Group acquires DHFL for ₹34,250 Cr', type: 'outcome' },
    ],
    red_flags_detected: [
      {
        flag_number: 19,
        flag_name: 'NPA levels spiking',
        evidence: 'NPAs jumped from 0.4% to 10.3% in one year (2018-19)',
        when_visible: '6 months before',
      },
      {
        flag_number: 38,
        flag_name: 'Related party loans',
        evidence: 'Cobrapost alleged ₹31,000 Cr diverted to promoter entities',
        when_visible: '4 months before (investigative journalism)',
      },
      {
        flag_number: 12,
        flag_name: 'Debt rising faster than assets',
        evidence: 'Borrowed heavily but loan book quality deteriorated',
        when_visible: '1 year before',
      },
    ],
    what_investors_missed: [
      'Cobrapost investigation in Jan 2019 was public and detailed',
      'NPA spike from 0.4% to 10.3% in one year is catastrophic',
      'Post-IL&FS crisis, all NBFCs/HFCs were under stress',
      'Stock fell 50% before default but retail kept buying',
      'Promoter Kapil Wadhawan\'s lavish lifestyle was known',
    ],
    outcome: 'Complete collapse. Stock from ₹600 to ₹3 (99.5% loss). ₹90,000 Cr debt default. Promoters arrested. Piramal acquired assets at steep discount. Shareholders got nothing.',
    regulatory_action: 'RBI sent to bankruptcy. ED arrested Wadhawan brothers. SEBI investigation. CBI case for fraud. Assets auctioned. Lenders recovered ~30-40%.',
    lessons_learned: [
      'Investigative journalism exposes fraud - believe it',
      'Sudden NPA spike is terminal for lenders',
      'Post-crisis environment (IL&FS) made NBFC/HFC toxic',
      'If stock falls 50%+ in weeks, don\'t catch falling knife',
    ],
    detection_difficulty: 'Easy',
  },
];

// Fraud patterns for pattern matching
export const FRAUD_PATTERNS: FraudPattern[] = [
  {
    pattern_id: 'cash-flow-manipulation',
    pattern_name: 'Cash Flow Manipulation',
    description: 'Profit grows but cash flow stagnates or declines. Indicates revenue inflation or receivables fraud.',
    common_flags: [1, 7, 14],
    historical_cases: ['satyam-2009', 'pc-jeweller-2018'],
    detection_rate: 85,
    severity: 'CRITICAL',
  },
  {
    pattern_id: 'promoter-desperation',
    pattern_name: 'Promoter Desperation',
    description: 'High pledging, related party transactions, aggressive debt. Promoter is extracting value before collapse.',
    common_flags: [25, 38, 12],
    historical_cases: ['yes-bank-2020', 'gitanjali-2018', 'dhfl-2019'],
    detection_rate: 78,
    severity: 'CRITICAL',
  },
  {
    pattern_id: 'auditor-red-flag',
    pattern_name: 'Auditor Warning',
    description: 'Auditor resignation, qualification, or change. Indicates serious accounting issues auditor won\'t sign off on.',
    common_flags: [2, 3],
    historical_cases: ['pc-jeweller-2018', 'satyam-2009'],
    detection_rate: 92,
    severity: 'CRITICAL',
  },
  {
    pattern_id: 'nbfc-crisis-pattern',
    pattern_name: 'NBFC/HFC Crisis Pattern',
    description: 'Asset-liability mismatch, NPA spike, debt default. Common in non-banking financial companies.',
    common_flags: [19, 21, 12],
    historical_cases: ['ilfs-2018', 'dhfl-2019', 'yes-bank-2020'],
    detection_rate: 70,
    severity: 'HIGH',
  },
];
